function Pe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}};(function(e){(function(d){var r=Se(),v=we(),U=Ee(),ee=Ie(),te={imagePlaceholder:void 0,cacheBust:!1},j={toSvg:ne,toPng:de,toJpeg:fe,toBlob:ge,toPixelData:me,impl:{fontFaces:U,images:ee,util:r,inliner:v,options:{}}};e.exports=j;function ne(o,n){return n=n||{},he(n),Promise.resolve(o).then(function(i){return re(i,n.filter,!0)}).then(pe).then(ve).then(a).then(function(i){return ye(i,n.width||r.width(o),n.height||r.height(o))});function a(i){return n.bgcolor&&(i.style.backgroundColor=n.bgcolor),n.width&&(i.style.width=n.width+"px"),n.height&&(i.style.height=n.height+"px"),n.style&&Object.keys(n.style).forEach(function(m){i.style[m]=n.style[m]}),i}}function me(o,n){return _(o,n||{}).then(function(a){return a.getContext("2d").getImageData(0,0,r.width(o),r.height(o)).data})}function de(o,n){return _(o,n||{}).then(function(a){return a.toDataURL()})}function fe(o,n){return n=n||{},_(o,n).then(function(a){return a.toDataURL("image/jpeg",n.quality||1)})}function ge(o,n){return _(o,n||{}).then(r.canvasToBlob)}function he(o){typeof o.imagePlaceholder>"u"?j.impl.options.imagePlaceholder=te.imagePlaceholder:j.impl.options.imagePlaceholder=o.imagePlaceholder,typeof o.cacheBust>"u"?j.impl.options.cacheBust=te.cacheBust:j.impl.options.cacheBust=o.cacheBust}function _(o,n){return ne(o,n).then(r.makeImage).then(r.delay(100)).then(function(i){var m=a(o);return m.getContext("2d").drawImage(i,0,0),m});function a(i){var m=document.createElement("canvas");if(m.width=n.width||r.width(i),m.height=n.height||r.height(i),n.bgcolor){var s=m.getContext("2d");s.fillStyle=n.bgcolor,s.fillRect(0,0,m.width,m.height)}return m}}function re(o,n,a){if(!a&&n&&!n(o))return Promise.resolve();return Promise.resolve(o).then(i).then(function(l){return m(o,l,n)}).then(function(l){return s(o,l)});function i(l){return l instanceof HTMLCanvasElement?r.makeImage(l.toDataURL()):l.cloneNode(!1)}function m(l,c,w){var b=l.childNodes;if(b.length===0)return Promise.resolve(c);return p(c,r.asArray(b),w).then(function(){return c});function p(k,E,y){var I=Promise.resolve();return E.forEach(function(T){I=I.then(function(){return re(T,y)}).then(function(P){P&&k.appendChild(P)})}),I}}function s(l,c){if(!(c instanceof Element))return c;return Promise.resolve().then(w).then(b).then(p).then(k).then(function(){return c});function w(){E(window.getComputedStyle(l),c.style);function E(y,I){y.cssText?I.cssText=y.cssText:T(y,I);function T(P,A){r.asArray(P).forEach(function(t){A.setProperty(t,P.getPropertyValue(t),P.getPropertyPriority(t))})}}}function b(){[":before",":after"].forEach(function(y){E(y)});function E(y){var I=window.getComputedStyle(l,y),T=I.getPropertyValue("content");if(T===""||T==="none")return;var P=r.uid();c.className=c.className+" "+P;var A=document.createElement("style");A.appendChild(t(P,y,I)),c.appendChild(A);function t(u,g,f){var S="."+u+":"+g,x=f.cssText?M(f):F(f);return document.createTextNode(S+"{"+x+"}");function M(L){var B=L.getPropertyValue("content");return L.cssText+" content: "+B+";"}function F(L){return r.asArray(L).map(B).join("; ")+";";function B(q){return q+": "+L.getPropertyValue(q)+(L.getPropertyPriority(q)?" !important":"")}}}}}function p(){l instanceof HTMLTextAreaElement&&(c.innerHTML=l.value),l instanceof HTMLInputElement&&c.setAttribute("value",l.value)}function k(){c instanceof SVGElement&&(c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c instanceof SVGRectElement&&["width","height"].forEach(function(E){var y=c.getAttribute(E);y&&c.style.setProperty(E,y)}))}}}function pe(o){return U.resolveAll().then(function(n){var a=document.createElement("style");return o.appendChild(a),a.appendChild(document.createTextNode(n)),o})}function ve(o){return ee.inlineAll(o).then(function(){return o})}function ye(o,n,a){return Promise.resolve(o).then(function(i){return i.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(i)}).then(r.escapeXhtml).then(function(i){return'<foreignObject x="0" y="0" width="100%" height="100%">'+i+"</foreignObject>"}).then(function(i){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+a+'">'+i+"</svg>"}).then(function(i){return"data:image/svg+xml;charset=utf-8,"+i})}function Se(){return{escape:k,parseExtension:n,mimeType:a,dataAsUrl:p,isDataUrl:i,canvasToBlob:s,resolveUrl:l,getAndEncode:b,uid:c(),delay:E,asArray:y,escapeXhtml:I,makeImage:w,width:T,height:P};function o(){var t="application/font-woff",u="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:u,jpeg:u,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function n(t){var u=/\.([^\.\/]*?)$/g.exec(t);return u?u[1]:""}function a(t){var u=n(t).toLowerCase();return o()[u]||""}function i(t){return t.search(/^(data:)/)!==-1}function m(t){return new Promise(function(u){for(var g=window.atob(t.toDataURL().split(",")[1]),f=g.length,S=new Uint8Array(f),x=0;x<f;x++)S[x]=g.charCodeAt(x);u(new Blob([S],{type:"image/png"}))})}function s(t){return t.toBlob?new Promise(function(u){t.toBlob(u)}):m(t)}function l(t,u){var g=document.implementation.createHTMLDocument(),f=g.createElement("base");g.head.appendChild(f);var S=g.createElement("a");return g.body.appendChild(S),f.href=u,S.href=t,S.href}function c(){var t=0;return function(){return"u"+u()+t++;function u(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function w(t){return new Promise(function(u,g){var f=new Image;f.onload=function(){u(f)},f.onerror=g,f.src=t})}function b(t){var u=3e4;return j.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime()),new Promise(function(g){var f=new XMLHttpRequest;f.onreadystatechange=M,f.ontimeout=F,f.responseType="blob",f.timeout=u,f.open("GET",t,!0),f.send();var S;if(j.impl.options.imagePlaceholder){var x=j.impl.options.imagePlaceholder.split(/,/);x&&x[1]&&(S=x[1])}function M(){if(f.readyState===4){if(f.status!==200){S?g(S):L("cannot fetch resource: "+t+", status: "+f.status);return}var B=new FileReader;B.onloadend=function(){var q=B.result.split(/,/)[1];g(q)},B.readAsDataURL(f.response)}}function F(){S?g(S):L("timeout of "+u+"ms occured while fetching resource: "+t)}function L(B){console.error(B),g("")}})}function p(t,u){return"data:"+u+";base64,"+t}function k(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function E(t){return function(u){return new Promise(function(g){setTimeout(function(){g(u)},t)})}}function y(t){for(var u=[],g=t.length,f=0;f<g;f++)u.push(t[f]);return u}function I(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")}function T(t){var u=A(t,"border-left-width"),g=A(t,"border-right-width");return t.scrollWidth+u+g}function P(t){var u=A(t,"border-top-width"),g=A(t,"border-bottom-width");return t.scrollHeight+u+g}function A(t,u){var g=window.getComputedStyle(t).getPropertyValue(u);return parseFloat(g.replace("px",""))}}function we(){var o=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:m,shouldProcess:n,impl:{readUrls:a,inline:i}};function n(s){return s.search(o)!==-1}function a(s){for(var l=[],c;(c=o.exec(s))!==null;)l.push(c[1]);return l.filter(function(w){return!r.isDataUrl(w)})}function i(s,l,c,w){return Promise.resolve(l).then(function(p){return c?r.resolveUrl(p,c):p}).then(w||r.getAndEncode).then(function(p){return r.dataAsUrl(p,r.mimeType(l))}).then(function(p){return s.replace(b(l),"$1"+p+"$3")});function b(p){return new RegExp(`(url\\(['"]?)(`+r.escape(p)+`)(['"]?\\))`,"g")}}function m(s,l,c){if(w())return Promise.resolve(s);return Promise.resolve(s).then(a).then(function(b){var p=Promise.resolve(s);return b.forEach(function(k){p=p.then(function(E){return i(E,k,l,c)})}),p});function w(){return!n(s)}}}function Ee(){return{resolveAll:o,impl:{readAll:n}};function o(){return n().then(function(a){return Promise.all(a.map(function(i){return i.resolve()}))}).then(function(a){return a.join(`
`)})}function n(){return Promise.resolve(r.asArray(document.styleSheets)).then(i).then(a).then(function(s){return s.map(m)});function a(s){return s.filter(function(l){return l.type===CSSRule.FONT_FACE_RULE}).filter(function(l){return v.shouldProcess(l.style.getPropertyValue("src"))})}function i(s){var l=[];return s.forEach(function(c){try{r.asArray(c.cssRules||[]).forEach(l.push.bind(l))}catch(w){console.log("Error while reading CSS rules from "+c.href,w.toString())}}),l}function m(s){return{resolve:function(){var c=(s.parentStyleSheet||{}).href;return v.inlineAll(s.cssText,c)},src:function(){return s.style.getPropertyValue("src")}}}}}function Ie(){return{inlineAll:n,impl:{newImage:o}};function o(a){return{inline:i};function i(m){return r.isDataUrl(a.src)?Promise.resolve():Promise.resolve(a.src).then(m||r.getAndEncode).then(function(s){return r.dataAsUrl(s,r.mimeType(a.src))}).then(function(s){return new Promise(function(l,c){a.onload=l,a.onerror=c,a.src=s})})}}function n(a){if(!(a instanceof Element))return Promise.resolve(a);return i(a).then(function(){return a instanceof HTMLImageElement?o(a).inline():Promise.all(r.asArray(a.childNodes).map(function(m){return n(m)}))});function i(m){var s=m.style.getPropertyValue("background");return s?v.inlineAll(s).then(function(l){m.style.setProperty("background",l,m.style.getPropertyPriority("background"))}).then(function(){return m}):Promise.resolve(m)}}}})()})(ue);var be=ue.exports;const xe=Pe(be);console.log(">> Ready :)");console.log(">> Ready form :)");const oe=document.querySelectorAll(".collapsible__header");document.querySelectorAll(".collapsible__content");const N=document.getElementById("name"),O=document.getElementById("message"),z=document.getElementById("email"),H=document.getElementById("phone"),V=document.getElementById("date"),$=document.getElementById("address"),ae=document.getElementById("photo"),le=document.getElementById("style"),D=document.querySelector(".js-backgrounds"),Ce=document.querySelector(".js-reset");document.querySelector(".js-create");const Ae=document.querySelector(".js-form-fillOut"),Le=document.querySelector(".js-form-design");oe.forEach(e=>{e.addEventListener("click",()=>{const d=e.nextElementSibling;oe.forEach(r=>{const v=r.nextElementSibling;r!==e&&(r.classList.remove("active"),v.style.maxHeight=null,v.classList.remove("open"))}),e.classList.toggle("active"),d.classList.contains("open")?(d.style.maxHeight=null,d.classList.remove("open")):(d.style.maxHeight=d.scrollHeight+32+"px",d.classList.add("open"))})});const h={name:"",message:"",email:"",phone:"",date:"",address:"",photo:"",style:"",font:"",fontSize:"",fontColor:"",background:""},Be={name:document.getElementById("name"),message:document.getElementById("message"),email:document.getElementById("email"),phone:document.getElementById("phone"),date:document.getElementById("date"),address:document.getElementById("address"),photo:document.getElementById("photo"),style:document.getElementById("style")},je={boda:["boda1.jpg","boda2.jpg","boda3.jpg"],cumple:["cumple1.jpg","cumple2.jpg","cumple3.jpg"],networking:["networking1.jpg","networking2.jpg","networking3.jpg"]};Object.entries(Be).forEach(([e,d])=>{const r=e==="photo"||e==="style"?"change":"input";d.addEventListener(r,v=>{if(e==="photo"){const U=v.target.files[0];U&&(h.photo=URL.createObjectURL(U))}else e==="style"?(h.style=v.target.value,Te()):h[e]=v.target.value;J()})});function Te(){D.innerHTML="",(je[h.style]||[]).forEach(d=>{const r=document.createElement("img");r.src=`./images/${h.style}/${d}`,r.alt=h.style,r.classList.add("background-option"),r.addEventListener("click",()=>{h.background=r.src,J()}),D.appendChild(r)})}Ce.addEventListener("click",e=>{e.preventDefault(),console.log("Antes de reset",{style:le.value,font:document.querySelector(".js-font").value,fontSize:document.querySelector(".js-font-size").value,fontColor:document.querySelector(".js-font-color").value}),Ae.reset(),Le.reset(),N.value="",O.value="",V.value="",z.value="",H.value="",$.value="",G.textContent="",W.textContent="",K.textContent="",Q.textContent="",Y.textContent="",Z.textContent="",ae&&(ae.value=""),D&&(D.innerHTML=""),Object.keys(h).forEach(d=>h[d]=""),h.font="Nunito",h.fontSize="12",h.fontColor="#000000",h.style="",h.background="",h.background="",localStorage.clear(),J(),X.style.fontSize=h.fontSize+"px",C.style.fontFamily=h.font,C.style.color=h.fontColor,C.style.backgroundImage="",R.innerHTML="",console.log("Después de reset:",{style:le.value,font:document.querySelector(".js-font").value,fontSize:document.querySelector(".js-font-size").value,fontColor:document.querySelector(".js-font-color").value}),console.log("Formulario reseteado y emitido:",h)});function J(){document.dispatchEvent(new CustomEvent("formDataUpdated",{detail:h}))}console.log(">> Ready :)");const ke=document.querySelector(".js-create");ke.addEventListener("click",e=>{e.preventDefault(),xe.toJpeg(document.querySelector(".preview"),{quality:.95}).then(d=>{const r=document.createElement("a");r.download="my-image-name.jpeg",r.href=d,r.click()}).catch(d=>{console.error("Error creando la imagen:",d)})});console.log("ready preview");const se=document.querySelector(".js_input_file"),R=document.querySelector(".photo-up");console.log("inputImg",se);console.log("photoUp",R);se.addEventListener("change",e=>{const d=e.target.files[0];if(console.log("Archivo seleccionado:",d),d){const r=new FileReader;r.onload=function(v){console.log("Imagen cargada:",v.target.result),localStorage.setItem("photoUp",JSON.stringify(v.target.result)),R.innerHTML=`<img src=${v.target.result} alt="Imagen del usuario/a" class="photo-up__image">`},r.readAsDataURL(d)}});console.log("ready preview");const C=document.querySelector(".preview"),X=document.querySelector(".preview__main");document.querySelector(".preview__data");const G=document.querySelector(".preview-main__host-name"),W=document.querySelector(".preview-main__message"),K=document.querySelector(".preview__event-date"),Q=document.querySelector(".preview__mail"),Y=document.querySelector(".preview__phone"),Z=document.querySelector(".preview__address"),ie=document.querySelector(".js-font-size"),Ue=document.querySelector(".js-font"),qe=document.querySelector(".js-font-color");N.value=localStorage.getItem("hostName");G.textContent=localStorage.getItem("hostName");O.value=localStorage.getItem("message");W.textContent=localStorage.getItem("message");V.value=localStorage.getItem("eventDate");K.textContent=localStorage.getItem("eventDate");z.value=localStorage.getItem("hostMail");Q.textContent=localStorage.getItem("hostName");H.value=localStorage.getItem("hostPhone");Y.textContent=localStorage.getItem("hostPhone");$.value=localStorage.getItem("hostAddress");Z.textContent=localStorage.getItem("hostAddress");X.style.fontSize=localStorage.getItem("fontSize");C.style.fontFamily=localStorage.getItem("fontFamily");C.style.color=localStorage.getItem("fontColor");C.style.backgroundImage=localStorage.getItem("selectedBackground");const ce=JSON.parse(localStorage.getItem("photoUp")),_e=()=>{ce&&(R.innerHTML=`<img src=${ce} alt="Imagen del usuario/a" class="photo-up__image">`)};_e();N.addEventListener("input",e=>{G.textContent=e.target.value,localStorage.setItem("hostName",e.target.value)});O.addEventListener("input",e=>{W.textContent=e.target.value,localStorage.setItem("message",e.target.value)});V.addEventListener("input",e=>{K.textContent=e.target.value,localStorage.setItem("eventDate",e.target.value)});z.addEventListener("input",e=>{Q.textContent=e.target.value,localStorage.setItem("hostMail",e.target.value)});H.addEventListener("input",e=>{Y.textContent=e.target.value,localStorage.setItem("hostPhone",e.target.value)});$.addEventListener("input",e=>{Z.textContent=e.target.value,localStorage.setItem("hostAddress",e.target.value)});ie.addEventListener("input",()=>{const e=ie.value;X.style.fontSize=e+"px",localStorage.setItem("fontSize",e+"px")});Ue.addEventListener("change",e=>{const d=e.target.value;C.style.fontFamily=d,localStorage.setItem("fontFamily",e.target.value)});qe.addEventListener("input",e=>{const d=e.target.value;C.style.color=d,localStorage.setItem("fontColor",d)});document.addEventListener("formDataUpdated",e=>{const d=e.detail;d.background&&(C.style.backgroundImage=`url("${d.background}")`,localStorage.setItem("selectedBackground",C.style.backgroundImage))});
//# sourceMappingURL=main.js.map
